(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{2552:(e,a,t)=>{Promise.resolve().then(t.bind(t,7115))},7115:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var s=t(5155),r=t(2115),i=t(5565),o=t(5683),d=t(9124),n=t(3312),l=t(1344),c=t(3900),p=t(9749),m=t(8986),u=t(6754),f=t(4850),x=t(2645),h=t(2488),g=t(7193),j=t(1567);let y=f.bL;f.YJ;let b=f.WT,N=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(f.l9,{ref:a,className:(0,j.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,s.jsx)(f.In,{asChild:!0,children:(0,s.jsx)(x.A,{className:"h-4 w-4 opacity-50"})})]})});N.displayName=f.l9.displayName;let v=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(f.PP,{ref:a,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})});v.displayName=f.PP.displayName;let w=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(f.wn,{ref:a,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})});w.displayName=f.wn.displayName;let C=r.forwardRef((e,a)=>{let{className:t,children:r,position:i="popper",...o}=e;return(0,s.jsx)(f.ZL,{children:(0,s.jsxs)(f.UC,{ref:a,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...o,children:[(0,s.jsx)(v,{}),(0,s.jsx)(f.LM,{className:(0,j.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(w,{})]})})});C.displayName=f.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(f.JU,{ref:a,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=f.JU.displayName;let D=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(f.q7,{ref:a,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(f.VF,{children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})}),(0,s.jsx)(f.p4,{children:r})]})});function k(){let[e,a]=(0,r.useState)([]),[t,f]=(0,r.useState)([]),[x,h]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null),[v,w]=(0,r.useState)({name:"",price:"",image:"",categoryId:"",description:"",emoji:"",detailedDescription:"",specifications:"",stock:""}),[k,E]=(0,r.useState)(!1),[R,J]=(0,r.useState)(null);(0,r.useEffect)(()=>{F(),I()},[]);let F=async()=>{try{let e=await fetch("/api/products");if(!e.ok)throw Error("Error al obtener los productos.");let t=await e.json();a(t)}catch(e){J("Error al cargar los productos."),console.error(e)}},I=async()=>{try{let e=await fetch("/api/categories");if(!e.ok)throw Error("Error al obtener las categor\xedas.");let a=await e.json();f(a)}catch(e){J("Error al cargar las categor\xedas."),console.error(e)}},P=e=>{w({...v,[e.target.name]:e.target.value})},S=async t=>{t.preventDefault(),E(!0),J(null);try{if(g){let t=await fetch("/api/products/".concat(g.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name,price:parseFloat(v.price),image:v.image,categoryId:v.categoryId,description:v.description,emoji:v.emoji,detailedDescription:v.detailedDescription,specifications:v.specifications.split(",").map(e=>e.trim()),stock:parseInt(v.stock,10)})});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al actualizar el producto.")}let s=await t.json();a(e.map(e=>e.id===s.id?s:e))}else{let t=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name,price:parseFloat(v.price),image:v.image,categoryId:v.categoryId,description:v.description,emoji:v.emoji,detailedDescription:v.detailedDescription,specifications:v.specifications.split(",").map(e=>e.trim()),stock:parseInt(v.stock,10)})});if(!t.ok){let e=await t.json();throw Error(e.error||"Error al crear el producto.")}let s=await t.json();a([...e,s])}h(!1),w({name:"",price:"",image:"",categoryId:"",description:"",emoji:"",detailedDescription:"",specifications:"",stock:""}),j(null)}catch(e){J(err.message)}finally{E(!1)}},z=e=>{j(e),w({name:e.name,price:e.price.toString(),image:e.image,categoryId:e.categoryId,description:e.description,emoji:e.emoji,detailedDescription:e.detailedDescription,specifications:e.specifications.join(", "),stock:e.stock.toString()}),h(!0)},q=async t=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar este producto?"))try{let s=await fetch("/api/products/".concat(t),{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Error al eliminar el producto.")}a(e.filter(e=>e.id!==t))}catch(e){alert(err.message)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"\uD83D\uDCE6 Gesti\xf3n de Productos"}),(0,s.jsxs)(l.lG,{open:x,onOpenChange:h,children:[(0,s.jsx)(l.zM,{asChild:!0,children:(0,s.jsx)(n.$,{children:"✨ Nuevo Producto"})}),(0,s.jsxs)(l.Cf,{"aria-describedby":"product-form-description",className:"max-w-2xl",children:[(0,s.jsxs)(l.c7,{children:[(0,s.jsx)(l.L3,{children:g?"✏️ Editar Producto":"✨ Nuevo Producto"}),(0,s.jsx)(l.rr,{id:"product-form-description",children:"A\xf1ade o modifica los detalles del producto aqu\xed. Aseg\xfarate de completar todos los campos requeridos."})]}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"name",children:"Nombre"}),(0,s.jsx)(c.p,{id:"name",name:"name",value:v.name,onChange:P,placeholder:"Nombre del producto",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"price",children:"Precio"}),(0,s.jsx)(c.p,{id:"price",name:"price",type:"number",step:"0.01",value:v.price,onChange:P,placeholder:"Precio en USD",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"image",children:"URL de la Imagen"}),(0,s.jsx)(c.p,{id:"image",name:"image",value:v.image,onChange:P,placeholder:"https://ejemplo.com/imagen.jpg",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"categoryId",children:"Categor\xeda"}),(0,s.jsxs)(y,{onValueChange:e=>w({...v,categoryId:e}),defaultValue:v.categoryId,children:[(0,s.jsx)(N,{children:(0,s.jsx)(b,{placeholder:"Selecciona una categor\xeda"})}),(0,s.jsx)(C,{children:t.map(e=>(0,s.jsxs)(D,{value:e.id,children:[e.emoji," ",e.name]},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"description",children:"Descripci\xf3n"}),(0,s.jsx)(u.T,{id:"description",name:"description",value:v.description,onChange:P,placeholder:"Descripci\xf3n breve del producto...",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"emoji",children:"Emoji"}),(0,s.jsx)(c.p,{id:"emoji",name:"emoji",value:v.emoji,onChange:P,placeholder:"\uD83D\uDE80",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"detailedDescription",children:"Descripci\xf3n Detallada"}),(0,s.jsx)(u.T,{id:"detailedDescription",name:"detailedDescription",value:v.detailedDescription,onChange:P,placeholder:"Descripci\xf3n completa del producto..."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"specifications",children:"Especificaciones (separadas por comas)"}),(0,s.jsx)(c.p,{id:"specifications",name:"specifications",value:v.specifications,onChange:P,placeholder:"Especificaci\xf3n 1, Especificaci\xf3n 2, ..."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"stock",children:"Stock"}),(0,s.jsx)(c.p,{id:"stock",name:"stock",type:"number",value:v.stock,onChange:P,placeholder:"Cantidad disponible",required:!0})]}),R&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:R}),(0,s.jsx)(l.Es,{children:(0,s.jsx)(n.$,{type:"submit",disabled:k,children:k?g?"Guardando...":"Creando...":g?"\uD83D\uDCBE Guardar Cambios":"✨ Crear Producto"})})]})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,s.jsx)(o.N,{children:e.map(e=>(0,s.jsx)(d.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:(0,s.jsxs)(p.Zp,{className:"overflow-hidden",children:[(0,s.jsx)(p.Wu,{className:"p-0",children:(0,s.jsxs)("div",{className:"relative aspect-square",children:[(0,s.jsx)(i.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 to-background/0 flex items-end p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.name})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsx)("span",{className:"text-sm bg-primary/10 text-primary px-2 py-1 rounded",children:e.category.name}),(0,s.jsxs)("span",{className:"font-bold",children:["\uD83D\uDCB0 $",e.price]})]})]})})]})}),(0,s.jsxs)(p.wL,{className:"flex justify-center gap-2 pt-4",children:[(0,s.jsx)(n.$,{variant:"secondary",size:"sm",onClick:()=>z(e),children:"✏️ Editar"}),(0,s.jsx)(n.$,{variant:"destructive",size:"sm",onClick:()=>q(e.id),children:"\uD83D\uDDD1️ Eliminar"})]})]})},e.id))})})]})}D.displayName=f.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(f.wv,{ref:a,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=f.wv.displayName},3312:(e,a,t)=>{"use strict";t.d(a,{$:()=>l});var s=t(5155),r=t(2115),i=t(2317),o=t(1027),d=t(1567);let n=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,a)=>{let{className:t,variant:r,size:o,asChild:l=!1,...c}=e,p=l?i.DX:"button";return(0,s.jsx)(p,{className:(0,d.cn)(n({variant:r,size:o,className:t})),ref:a,...c})});l.displayName="Button"},9749:(e,a,t)=>{"use strict";t.d(a,{Wu:()=>l,ZB:()=>n,Zp:()=>o,aR:()=>d,wL:()=>c});var s=t(5155),r=t(2115),i=t(1567);let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});o.displayName="Card";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...r})});n.displayName="CardTitle",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",t),...r})});l.displayName="CardContent";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})});c.displayName="CardFooter"},1344:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>m,Es:()=>f,L3:()=>x,c7:()=>u,lG:()=>n,rr:()=>h,zM:()=>l});var s=t(5155),r=t(2115),i=t(9515),o=t(689),d=t(1567);let n=i.bL,l=i.l9,c=i.ZL;i.bm;let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(i.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});p.displayName=i.hJ.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(i.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.UC.displayName;let u=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};u.displayName="DialogHeader";let f=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};f.displayName="DialogFooter";let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(i.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});x.displayName=i.hE.displayName;let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(i.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...r})});h.displayName=i.VY.displayName},3900:(e,a,t)=>{"use strict";t.d(a,{p:()=>o});var s=t(5155),r=t(2115),i=t(1567);let o=r.forwardRef((e,a)=>{let{className:t,type:r,...o}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...o})});o.displayName="Input"},8986:(e,a,t)=>{"use strict";t.d(a,{J:()=>l});var s=t(5155),r=t(2115),i=t(6195),o=t(1027),d=t(1567);let n=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(i.b,{ref:a,className:(0,d.cn)(n(),t),...r})});l.displayName=i.b.displayName},6754:(e,a,t)=>{"use strict";t.d(a,{T:()=>o});var s=t(5155),r=t(2115),i=t(1567);let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});o.displayName="Textarea"},1567:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var s=t(3463),r=t(9795);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[365,124,911,87,570,441,517,358],()=>a(2552)),_N_E=e.O()}]);