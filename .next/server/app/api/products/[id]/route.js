(()=>{var e={};e.id=856,e.ids=[856],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},6410:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>j,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{DELETE:()=>p,GET:()=>c,PUT:()=>d});var s=t(2706),n=t(8203),i=t(5994),a=t(9187),u=t(3219);async function c(e,{params:r}){try{let{id:e}=r,t=await u.z.product.findUnique({where:{id:e},include:{images:!0,category:!0}});if(!t)return a.NextResponse.json({error:"Producto no encontrado."},{status:404});return a.NextResponse.json(t)}catch{return a.NextResponse.json({error:"Error al obtener el producto."},{status:500})}}async function d(e,{params:r}){try{let{id:t}=r,{name:o,price:s,image:n,categoryId:i,description:c,emoji:d,detailedDescription:p,specifications:l,stock:x}=await e.json(),m=await u.z.product.findUnique({where:{id:t}});if(!m)return a.NextResponse.json({error:"Producto no encontrado."},{status:404});let g=await u.z.product.update({where:{id:t},data:{name:o||m.name,price:s||m.price,image:n||m.image,categoryId:i||m.categoryId,description:c||m.description,emoji:d||m.emoji,detailedDescription:p||m.detailedDescription,specifications:l||m.specifications,stock:void 0!==x?x:m.stock},include:{category:!0,images:!0}});return a.NextResponse.json(g)}catch{return console.error(error),a.NextResponse.json({error:"Error al actualizar el producto."},{status:500})}}async function p(e,{params:r}){try{let{id:e}=r;if(!await u.z.product.findUnique({where:{id:e}}))return a.NextResponse.json({error:"Producto no encontrado."},{status:404});return await u.z.product.delete({where:{id:e}}),a.NextResponse.json({message:"Producto eliminado correctamente."},{status:200})}catch{return console.error(error),a.NextResponse.json({error:"Error al eliminar el producto."},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Dasieloski\\Proyectos\\TorreStore\\VERSION DEFINITIVA\\dasieloskistore\\src\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:g}=l;function j(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},6487:()=>{},8335:()=>{},3219:(e,r,t)=>{"use strict";t.d(r,{z:()=>s});let o=require("@prisma/client"),s=global.prisma||new o.PrismaClient({log:["query"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,452],()=>t(6410));module.exports=o})();